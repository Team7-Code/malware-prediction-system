from datetime import time
from multiprocessing import Queue, Process, current_process

import time


def do_tasks(tasks_to_do, tasks_are_done):
    while True:
        try:
            task= tasks_to_do.get_nowait()

        except:
            break
        else:
            print(task)
            tasks_are_done.put(task + " done by " + current_process().name)
            time.sleep(5)


def main():
    number_of_tasks = 16
    number_of_processes = 8

    tasks_to_do = Queue()
    tasks_are_done = Queue()

    for i in range(number_of_tasks):
        tasks_to_do.put("Task " + str(i))

    procs = []
    for i in range(number_of_processes):
        proc = Process(target=do_tasks, args=(tasks_to_do, tasks_are_done,))
        procs.append(proc)
        proc.start()

    for proc in procs:
        proc.join()

    while not tasks_are_done.empty():
        print(tasks_are_done.get())

if __name__ == "__main__":
    main()
